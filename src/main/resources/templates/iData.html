<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>upload</title>
    <link rel="stylesheet" href="/static/layui/css/layui.css" media="all">
    <script type="text/javascript" src="/static/layui/layui.js"></script>
    <script  src="/static/jquery-3.5.1/jquery-3.5.1.min.js"></script>
    <style>

    </style>
</head>
<body>
<div>
    <button type="button" class="layui-btn" id="test1">
        <i class="layui-icon">&#xe67c;</i>上传图片
    </button>
    <input id="t1" value="html"/>
    <br/>
</div>
<div>
    <button class="layui-btn test" lay-data="{url: '/data/uploadPic'}">上传图片</button>
</div>
    <button class="layui-btn test1" lay-data="{url: '/data/uploadFile', accept: 'file'}">上传文件</button><br/>
    <button class="layui-btn test2" lay-data="{url: '/data/uploadFile_write', accept: 'file'}">上传文件并读写</button>
</body>
<script>

    $(function(){
            // alert($("#t1").val());
        }
    );
    layui.use('upload', function () {
        var upload = layui.upload;

        //执行实例
        var uploadInst = upload.render({
            elem: '#test1' //绑定元素
            , url: '/data/uploadPic' //上传接口
            , done: function (res) {
                //上传完毕回调
                alert(res.code);
            }
            , error: function () {
                //请求异常回调
                alert("error");
            }
        });
        upload.render({
            elem: '.test'
            ,done: function(res, index, upload){
                //获取当前触发上传的元素，一般用于 elem 绑定 class 的情况，注意：此乃 layui 2.1.0 新增
                var item = this.item;
                alert("111");
            }
        });
        upload.render({
            elem: '.test1'
            ,done: function(res, index, upload){
                //获取当前触发上传的元素，一般用于 elem 绑定 class 的情况，注意：此乃 layui 2.1.0 新增
                var item = this.item;
                alert("222");
            }
        });
        upload.render({
            elem: '.test2'
            ,done: function(res, index, upload){
                //获取当前触发上传的元素，一般用于 elem 绑定 class 的情况，注意：此乃 layui 2.1.0 新增
                alert(res.code);
            }
        });
    });
</script>
</html>